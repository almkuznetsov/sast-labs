## Часть 4. Svace и CVE-2021-30145
Уязвимость CVE-2021-30145 была обнаружена в медиа-плеере mpv. Обнаружить данную уязвимость с использованием рассмотренных ранее cppcheck и clang static analyzer не получится, давайте попробуем обнаружить ее с помощью Svace.

В ходе выполнения заданий 4 части у нас должны получиться следующие артефакты работы:
- скриншоты выполнения пунктов задания
- `.svace-dir`, получившаяся в результате выполнения команды `svace build`
- файл, содержащий подготовленный с помощью `git format-patch` патч, испраляющий уязвимость

### Настройка окружения
Аналогично 3 части, для выполнения анализа требуется лицензия Svace, поэтому будем пользоваться прегенерированным снепшотом.

(!) Поскольку здесь мы будем собирать достаточно старую версию mpv, это задание рекомендуется делать не на alt:p11, а на alt:p10, где более старые версии зависимостей

Клонируем репозиторий mpv
```shell
git clone <your assignment repo>
```

Устанавливаем необходимые зависимости
```shell
sudo apt-get install libass-devel zlib-devel libswscale-devel libavfilter-devel libswresample-devel libavcodec-devel libavformat-devel
```

Самостоятельно с помощью ресурсов с данными об уязвимости CVE-2021-30145 определяем уязвимую версию и переключаемся на неё.

### Статический анализ
Подготовка файлов:
```
./bootstrap.py
./waf configure
```

Подготовка Svace:
```shell
svace init
```

Запускаем сборку (`./waf build`) под контролем Svace:
```shell
svace build ./waf build
```

<details>
  <summary>Пропускаем запуск анализа из-за отсутствия лицензии (мы снова будем использовать прегенерированный снепшот):</summary>

> Запускаем анализ Svace. На этом шаге требуется наличие лицензии.
> Опция `--with-cache` замедляет анализ, но позволяет продолжить "с того же места" в случае прерывания. Можно убрать для ускорения.
> ```shell
> svace analyze --with-cache
> ```

</details>

### Разбор срабатываний и исправление ошибки
Для обнаружения детектора, поиска и исправления ошибки используем инструкции 3 части и сведения об уязвимости CVE-2021-30145.

### Итог 4 части
В ходе 4 части мы познакомились с Svace. Проанализировали уязвимую к CVE-2021-30145 версию mpv, обнаружили данную уязвимость посредством статического анализа, исправили ее и убедились в отсутствии повторного срабатывания статического анализатора.

Дополнительно:
- Попробуете обнаружить эту уязвимость с помощью других средств статического анализа. Предположите, почему получается/не получается.
